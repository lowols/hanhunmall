## lg训练阶段一Mybatis

直接调用jdbc的缺点：

1. 数据库地址配置，sql存在硬编码问题
2. 结果集封装繁琐
3. 重复代码，获取数据源连接，获取SqlSession等套路代码

自定义数据库持久层的三板斧：配置文件，反射技术与简单的协议，代理对象

1. 通过配置文件结合简单协议，利用反射技术实现结果集的自动封装
2. 通过Spring代理对象，反射技术，可复用的执行jdbc的“套路代码”，被封装起来。调用方不需关注。

总之，调用方从复杂的jdbc调用“泥潭”中解放了出来，调用方只需简单的做好配置文件，只需关注接口和实体类就可以了。访问数据库的复杂过程被封装起来了。

> Mybatis里面需要遵守的简单协议举例
>
> - 配置文件里sql的id要与接口类限定名及方法匹配起来。
> - 配置文件里sql的返回值类型要与查询结果集的列名匹配起来。
> - ......
>
> 



要体会思想，面对类似问题时，你是否能设计实现一个类似的框架？学着发现问题，并根据问题类型找出合适的解决方案。

1. 协议思想，引入一些简单的协议，自动化一些操作，http也是类似的道理。
2. 单一职责，开闭原则，依赖接口而不是依赖具体的类，每个类只负责一个事情，代码结构清晰。mabits里面可以看到有些类负责匹配sql，有些类负责解析xml。彼此之间通过接口依赖。
3. 设计模式，这里可以看到构建者模式，工厂模式。